<Page x:Class="HZtest.View.ToolInfoPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:HZtest.View"
      xmlns:ctrl="clr-namespace:HZtest.Converters.View" 
      xmlns:control="clr-namespace:HZtest.Resources_资源.Control" 
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="ToolInfoPage">
    <Page.Resources>
        <ctrl:CountToVisibilityConverter x:Key="CountToVis"/>
    </Page.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" >
            <TextBlock Text="刀具号：" FontSize="24" FontWeight="Bold" Margin="30,0,0,0" VerticalAlignment="Center" />
            <TextBox   FontSize="24" Height="30" Width="300"  Margin="10,0,0,0" VerticalAlignment="Center" Text="{Binding ToolNumber}" />
            <Button    Content="查询" FontSize="24" Width="100"  Margin="30,0,0,0" VerticalAlignment="Center"  Command="{Binding QueryToolInfoCommand}"/>
        </StackPanel>

        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="长度补偿值" 
                       Grid.Row="0"
                       Grid.Column="0" 
                       Foreground="LightGray" 
                       FontWeight="Bold" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       FontSize="14"/>
            <TextBlock Text="半径补偿值" 
                       Grid.Row="0"
                       Grid.Column="1" 
                       Foreground="LightGray" 
                       FontWeight="Bold" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       FontSize="14"/>
            <TextBlock Text="长度磨损值" 
                       Grid.Row="0"
                       Grid.Column="2" 
                       Foreground="LightGray" 
                       FontWeight="Bold" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       FontSize="14"/>
            <TextBlock Text="半径磨损值" 
                       Grid.Row="0"
                       Grid.Column="3" 
                       Foreground="LightGray" 
                       FontWeight="Bold" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       FontSize="14"/>
            <TextBlock Text="综合寿命" 
                       Grid.Row="0"
                       Grid.Column="4" 
                       Foreground="LightGray" 
                       FontWeight="Bold" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       FontSize="14"/>


            <ItemsControl ItemsSource="{Binding ToolInfoList}"
                          Grid.Row="1"
                          Grid.ColumnSpan="5"
                          Visibility="{Binding ToolInfoList.Count, 
                                     Converter={StaticResource CountToVis}, 
                                     ConverterParameter='>0'}" 
                    VirtualizingPanel.IsVirtualizing="True">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="{Binding LengthCompensation}" 
                                           Grid.Column="0"
                                           Margin="12,8" 
                                           Foreground="#FF312F2F"
                                           TextTrimming="CharacterEllipsis"
                                           FontSize="14"
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="1" 
                                           Text="{Binding RadiusCompensation}" 
                                           Margin="12,8" 
                                           Foreground="#FF312F2F"
                                           TextTrimming="CharacterEllipsis"
                                           FontSize="14"
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2" 
                                           Text="{Binding LengthWear}" 
                                           Margin="12,8" 
                                           Foreground="#FF312F2F"
                                           TextTrimming="CharacterEllipsis"
                                           FontSize="14"
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="3" 
                                           Text="{Binding RadiusWear}" 
                                           Margin="12,8" 
                                           Foreground="#FF312F2F"
                                           TextTrimming="CharacterEllipsis"
                                           FontSize="14"
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="4" 
                                           Text="{Binding ComprehensiveLifespan}" 
                                           Margin="12,8" 
                                           Foreground="#FF312F2F"
                                           TextTrimming="CharacterEllipsis"
                                           FontSize="14"
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"/>

                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- 无数据提示 -->
            <TextBlock Grid.RowSpan="2" 
                        Grid.ColumnSpan="5"
                       Text="当前无信息" 
                       Visibility="{Binding ToolInfoList.Count, 
                                 Converter={StaticResource CountToVis}, 
                                 ConverterParameter='0'}" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       FontSize="24" 
                       FontWeight="Bold"
                       Foreground="#FFD32F2F"/>
        </Grid>
        <Grid Grid.Row="1" Grid.RowSpan="2" Grid.ColumnSpan="2" Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Grid.Background>
                <SolidColorBrush Color="#80000000" Opacity="0.8"/>
            </Grid.Background>
            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                <control:CircularProgressControl Width="48" Height="48"/>
                <TextBlock Text="加载中..." 
                               Foreground="White" 
                               FontSize="16" 
                               Margin="0,12,0,0"
                               HorizontalAlignment="Center"/>
            </Grid>
        </Grid>
    </Grid>
</Page>
